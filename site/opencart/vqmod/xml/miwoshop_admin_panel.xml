<modification>
    <id>The new Admin Panel</id>
    <version>1.0.0</version>
    <vqmver>1.0.0</vqmver>
    <author>miwisoft.com</author>

    <file name="admin/controller/common/home.php">
   		<operation>
   		  <search position="before"><![CDATA[$this->language->load('common/home');]]></search>
   		  <add>
        $this->language->load('common/header');
        $this->data['text_product'] = $this->language->get('text_product');
        $this->data['text_category'] = $this->language->get('text_category');
        $this->data['text_option'] = $this->language->get('text_option');
        $this->data['text_manufacturer'] = $this->language->get('text_manufacturer');
        $this->data['text_review'] = $this->language->get('text_review');
        $this->data['text_module'] = $this->language->get('text_module');
        $this->data['text_payment'] = $this->language->get('text_payment');
        $this->data['text_shipping'] = $this->language->get('text_shipping');
        $this->data['text_order'] = $this->language->get('text_order');
        $this->data['text_customer'] = $this->language->get('text_customer');
        //$this->data['text_coupon'] = $this->language->get('text_coupon');
        $this->data['text_setting'] = $this->language->get('text_setting');
        $this->data['text_language'] = $this->language->get('text_language');
        $this->data['text_user'] = $this->language->get('text_user');
        $this->data['text_vqmod_manager'] = $this->language->get('text_vqmod_manager');
             </add>
        </operation>
    </file>

    <file name="admin/view/template/common/home.tpl">
   		<operation>
			<search position="replace" offset="90"><![CDATA[<div class="content">]]></search>
			<add><![CDATA[
            <script language="javascript">
                function upgrade() {
                    window.location = "<?php echo $this->url->link('common/upgrade', 'token=' . $this->session->data['token'], 'SSL'); ?>";
                }
            </script>
			<div class="content" style="background: none repeat scroll 0 0 #F4F4F4;">
				<?php $base = MiwoShop::get('base'); ?>
				<?php $utility = MiwoShop::get('utility'); ?>
				<table cellspacing="0" cellpadding="0" border="0" width="100%">
					<tr>
						<td valign="top" width="58%">
							<div id="MiwoshopQuickIcons">
								<?php
								if($this->user->hasPermission('access','setting/store')) {
								    $utility->getMiwoshopIcon($this->url->link('setting/store', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-settings.png', $text_setting);
								}

								if($this->user->hasPermission('access','catalog/product')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/product', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-products.png', $text_product);
								}

								if($this->user->hasPermission('access','catalog/category')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/category', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-categories.png', $text_category);
								}

								if($this->user->hasPermission('access','catalog/manufacturer')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/manufacturer', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-manufacturers.png', $text_manufacturer);
								}

								if($this->user->hasPermission('access','catalog/option')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/option', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-options.png', $text_option);
								}

								if($this->user->hasPermission('access','catalog/review')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/review', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-reviews.png', $text_review);
								}

								if($this->user->hasPermission('access','catalog/information')) {
								    $utility->getMiwoshopIcon($this->url->link('catalog/information', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-informations.png', MText::_('COM_MIWOSHOP_PAGES'));
								}

								if($this->user->hasPermission('access','extension/module')) {
								    $utility->getMiwoshopIcon($this->url->link('extension/module', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-modules.png', $text_module);
								}

								if($this->user->hasPermission('access','extension/payment')) {
								    $utility->getMiwoshopIcon($this->url->link('extension/payment', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop.png', $text_payment);
								}

								if($this->user->hasPermission('access','extension/shipping')) {
								    $utility->getMiwoshopIcon($this->url->link('extension/shipping', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-shipping.png', $text_shipping);
								}

								if($this->user->hasPermission('access','sale/order')) {
								    $utility->getMiwoshopIcon($this->url->link('sale/order', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-orders.png', $text_order);
								}

								if($this->user->hasPermission('access','sale/customer')) {
								    $utility->getMiwoshopIcon($this->url->link('sale/customer', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-customers.png', $text_customer);
								}

								if(MFactory::getApplication()->isAdmin()){$utility->getMiwoshopIcon('index.php?option=com_languages&view=installed', 'icon-48-miwoshop-languages.png', $text_language);}

								if($this->user->hasPermission('access','user/user')) {
								    $utility->getMiwoshopIcon($this->url->link('user/user', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-users.png', $text_user);
								}

								if($this->user->hasPermission('access','module/vqmod_manager')) {
								    $utility->getMiwoshopIcon($this->url->link('module/vqmod_manager', 'token=' . $this->session->data['token'], 'SSL'), 'icon-48-miwoshop-vqmod.png', $text_vqmod_manager);
								}
								?>
							</div>
						</td>
						<td valign="top" width="42%" style="padding: 7px 0 0 5px">
						<?php
						$installed_version = $base->getMiwoshopVersion();
                        $latest_version = $base->getLatestMiwoshopVersion();
                        $version_status = version_compare($installed_version, $latest_version);
                        $config = $base->getConfig();
                        $pid = $base->getConfig()->get('pid');
						?>

						<?php echo MHtml::_('sliders.start', 'miwoshop'); ?>
						<?php echo MHtml::_('sliders.panel', MText::_('COM_MIWOSHOP_CPANEL_WELLCOME'), 'welcome'); ?>
							<div class="dashboard-slider">
							    <table class="wp-list-table widefat">
                                    <tr height="70">
										<td width="%25">
                                            <?php
                                                $icon = 'help';
                                                if ($this->info['version_enabled'] == 0) {
                                                    $icon = 'noinfo';
                                                } elseif ($this->info['version_status'] == 0) {
                                                    $icon = 'latest';
                                                }

                                                $img_path = MURL_MIWOSHOP.'/admin/assets/images/icon-48-v-'.$icon.'.png';
                                            ?>

                                            <img src="<?php echo $img_path; ?>" />
                                        </td>
                                        <td width="%35">
                                            <?php
                                                if ($version_status == 0) {
                                                    echo '<b><font color="green">'.MText::_('COM_MIWOSHOP_CPANEL_LATEST_VERSION_INSTALLED').'</font></b>';
                                                }
                                                elseif($version_status == -1) {
                                                    echo '<b><font color="red">'.MText::_('COM_MIWOSHOP_CPANEL_OLD_VERSION').'</font></b>';
                                                }
                                                else {
                                                    echo '<b><font color="orange">'.MText::_('COM_MIWOSHOP_CPANEL_NEWER_VERSION').'</font></b>';
                                                }
                                            ?>
                                        </td>
                                        <td align="center" style="vertical-align: middle;" rowspan="5">
                                            <a href="http://miwisoft.com/wordpress-plugins/miwoshop-wordpress-shopping-cart">
                                            <img src="<?php echo MURL_MIWOSHOP; ?>/admin/assets/images/logo.png" width="140" height="140" style="display: block; margin: auto;" alt="MiwoShop" title="MiwoShop" align="middle" border="0">
                                            </a>
                                        </td>
                                    </tr>
                                    <?php if (empty($pid)) { ?>
									<tr height="40">
										<td>
											<?php echo '<b><font color="red">'.MText::_('COM_MIWOSHOP_CPANEL_PID').'</font></b>';?>
										</td>
										<td>
											<form id="pid" method="post" action="<?php echo $this->url->link('common/edit/insertPID', 'token=' . $token, 'SSL'); ?>">
												<input type="text" name="pid" id="pid" class="inputbox" size="18" style="width: 150px;" />
												&nbsp;
												<input type="submit" class="button btn-danger" style="margin-bottom: 10px;" value="<?php echo MText::_('Save'); ?>" />
											</form>

										</td>
									</tr>
									<?php } ?>
                                    <tr height="40">
                                        <td>
                                            <?php
                                                if ($version_status == 0) {
                                                    echo MText::_('COM_MIWOSHOP_CPANEL_LATEST_VERSION');
                                                }
                                                elseif ($version_status == -1) {
                                                    echo '<b><font color="red">'.MText::_('COM_MIWOSHOP_CPANEL_LATEST_VERSION').'</font></b>';
                                                }
                                                else {
                                                    echo '<b><font color="orange">'.MText::_('COM_MIWOSHOP_CPANEL_LATEST_VERSION').'</font></b>';
                                                }
                                            ?>
                                        </td>
                                        <td>
                                            <?php
                                                if ($version_status == 0) {
                                                    echo $latest_version;
                                                }
                                                elseif ($version_status == -1) {
                                                    echo '<b><font color="red">'.$latest_version.'</font></b>&nbsp;';
                                                    echo '<input type="button" class="button btn btn-danger" value="'.MText::_('COM_MIWOSHOP_UPGRADE').'" onclick="upgrade();" />';
                                                }
                                                else {
                                                    echo '<b><font color="orange">'.$latest_version.'</font></b>';
                                                }
                                            ?>
                                        </td>
                                    </tr>
                                    <tr height="40">
                                        <td>
                                            <?php echo MText::_('COM_MIWOSHOP_CPANEL_INSTALLED_VERSION'); ?>
                                        </td>
                                        <td>
                                            <?php echo $installed_version; ?>
                                        </td>
                                    </tr>
                                    <tr height="40">
                                        <td>
                                            <?php echo MText::_('COM_MIWOSHOP_CPANEL_COPYRIGHT'); ?>
                                        </td>
                                        <td>
                                            <a href="http://miwisoft.com" target="_blank"><?php echo $base->getXmlText(MPATH_WP_PLG.'/miwoshop/miwoshop.xml', 'copyright'); ?></a>
                                        </td>
                                    </tr>
                                </table>
							</div>
						<?php echo MHtml::_('sliders.panel', $text_overview, 'overview'); ?>
							<div class="dashboard-slider">
							  <table class="wp-list-table widefat">
								<tr class="row0">
								  <td class="key"><?php echo $text_total_sale; ?></td>
								  <td><?php echo $total_sale; ?></td>
								</tr>
								<tr class="row1">
								  <td class="key"><?php echo $text_total_sale_year; ?></td>
								  <td><?php echo $total_sale_year; ?></td>
								</tr>
								<tr class="row0">
								  <td class="key"><?php echo $text_total_order; ?></td>
								  <td><?php echo $total_order; ?></td>
								</tr>
								<tr class="row1">
								  <td class="key"><?php echo $text_total_customer; ?></td>
								  <td><?php echo $total_customer; ?></td>
								</tr>
								<tr class="row0">
								  <td class="key"><?php echo $text_total_customer_approval; ?></td>
								  <td><?php echo $total_customer_approval; ?></td>
								</tr>
								<tr class="row1">
								  <td class="key"><?php echo $text_total_review_approval; ?></td>
								  <td><?php echo $total_review_approval; ?></td>
								</tr>
								<tr class="row0">
								  <td class="key"><?php echo $text_total_affiliate; ?></td>
								  <td><?php echo $total_affiliate; ?></td>
								</tr>
								<tr class="row1">
								  <td class="key"><?php echo $text_total_affiliate_approval; ?></td>
								  <td><?php echo $total_affiliate_approval; ?></td>
								</tr>
							  </table>
							</div>
						<?php echo MHtml::_('sliders.panel', $text_statistics, 'statistics'); ?>
							<div class="dashboard-content" style="border: 0px !important;">
								<div class="range"><?php echo $entry_range; ?>
								  <select id="range" onchange="getSalesChart(this.value)">
									<option value="day"><?php echo $text_day; ?></option>
									<option value="week"><?php echo $text_week; ?></option>
									<option value="month"><?php echo $text_month; ?></option>
									<option value="year"><?php echo $text_year; ?></option>
								  </select>
								</div>
								<div style="clear:both;"></div>
								<div id="report" style="width: 390px; height: 170px; margin: auto;"></div>
							</div>
						<?php echo MHtml::_('sliders.panel', $text_latest_10_orders, 'orders'); ?>
							<div class="dashboard-slider">
							  <table class="list">
								<thead>
								  <tr>
									<td class="right"><?php echo $column_order; ?></td>
									<td class="left"><?php echo $column_customer; ?></td>
									<td class="left"><?php echo $column_status; ?></td>
									<td class="left"><?php echo $column_date_added; ?></td>
									<td class="right"><?php echo $column_total; ?></td>
									<td class="right"><?php echo $column_action; ?></td>
								  </tr>
								</thead>
								<tbody>
								  <?php if ($orders) { ?>
								  <?php foreach ($orders as $order) { ?>
								  <tr>
									<td class="right"><?php echo $order['order_id']; ?></td>
									<td class="left"><?php echo $order['customer']; ?></td>
									<td class="left"><?php echo $order['status']; ?></td>
									<td class="left"><?php echo $order['date_added']; ?></td>
									<td class="right"><?php echo $order['total']; ?></td>
									<td class="right"><?php foreach ($order['action'] as $action) { ?>
									  [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
									  <?php } ?></td>
								  </tr>
								  <?php } ?>
								  <?php } else { ?>
								  <tr>
									<td class="center" colspan="6"><?php echo $text_no_results; ?></td>
								  </tr>
								  <?php } ?>
								</tbody>
							  </table>
							</div>
						<?php echo MHtml::_('sliders.end'); ?>
					  </td>
					</tr>
				</table>
			</div>]]></add>
   		</operation>
   	</file>
</modification>